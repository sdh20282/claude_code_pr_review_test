# 🤖 AI 에이전트 기반 PR 리뷰 워크플로우

## 개요
Claude Code의 서브 에이전트를 활용한 전문적이고 체계적인 PR 리뷰 시스템입니다.  
3개의 전문 에이전트가 병렬로 작업하여 종합적인 코드 리뷰를 제공합니다.

## 워크플로우 구조

### 1단계: 병렬 에이전트 실행
```javascript
// Agent 1: 코드 구조/로직 분석 전문
Task({
  subagent_type: "general-purpose",
  description: "코드 구조 및 로직 분석",
  prompt: `{파일명} 파일의 JavaScript 코드를 분석해줘. 다음 관점에서 집중적으로 검토해줘:

1. 코드 구조와 아키텍처
2. 로직의 정확성 및 버그 탐지
3. 에러 처리 및 예외 상황 대응
4. 코드 가독성 및 유지보수성

파일 경로: {파일_경로}

분석 결과를 다음 형식으로 정리해줘:
- 발견된 주요 이슈들 (심각도별로)
- 코드 품질 평가
- 구체적인 수정 제안사항`
})

// Agent 2: 보안/성능 검토 전문  
Task({
  subagent_type: "general-purpose",
  description: "보안 및 성능 검토",
  prompt: `{파일명} 파일의 보안 및 성능 측면을 검토해줘. 다음 관점에서 집중적으로 분석해줘:

1. 보안 취약점 (XSS, 입력 검증 등)
2. 성능 이슈 및 최적화 포인트
3. 메모리 누수 가능성
4. 브라우저 호환성 이슈

파일 경로: {파일_경로}

분석 결과를 다음 형식으로 정리해줘:
- 보안 위험도 평가
- 성능 병목 지점
- 최적화 권장사항`
})

// Agent 3: UX/접근성 평가 전문
Task({
  subagent_type: "general-purpose", 
  description: "UX 및 접근성 평가",
  prompt: `{파일명} 파일의 사용자 경험과 접근성을 평가해줘. 다음 관점에서 집중적으로 검토해줘:

1. 사용자 인터페이스 설계
2. 사용자 경험 (UX) 품질
3. 접근성 (WCAG 가이드라인)
4. 모바일 반응형 디자인

파일 경로: {파일_경로}

분석 결과를 다음 형식으로 정리해줘:
- UX 강점과 약점
- 접근성 준수 현황
- 개선 제안사항`
})
```

### 2단계: 결과 통합 및 코멘트 생성

```bash
gh pr comment {PR번호} --body "$(cat <<'EOF'
## 🤖 AI 워크플로우 기반 종합 코드 리뷰

**3개 전문 에이전트의 병렬 분석 결과를 통합한 종합 리뷰입니다.**

---

## 📊 **종합 평가**
- **코드 품질**: {점수}/10
- **보안 위험도**: {위험도}
- **접근성 준수**: {준수도}
- **전체 권장사항**: {권장사항}

---

## 🔴 **긴급 수정 필요 (Critical)**
{Agent 1, 2, 3 결과에서 Critical 이슈들 정리}

---

## 🟡 **중요 개선사항 (Major)**
{Agent 1, 2, 3 결과에서 Major 이슈들 정리}

---

## 🟢 **사용자 경험 향상 (Minor)**
{Agent 1, 2, 3 결과에서 Minor 이슈들 정리}

---

## ✅ **잘 구현된 부분**
{각 Agent에서 발견한 강점들 정리}

---

## 🎯 **우선 수정 권장사항**
{우선순위별 수정사항 나열}

---

**🤖 이 리뷰는 3개의 전문 AI 에이전트가 각각 다른 관점(코드품질, 보안성능, UX접근성)에서 분석한 결과를 통합한 것입니다.**
EOF
)"
```

## 사용 방법

### 1. 사전 준비
```bash
# PR 정보 확인
gh pr list
gh pr diff {PR번호}
```

### 2. 워크플로우 실행
```javascript
// Todo 리스트 생성
TodoWrite([
  {
    content: "PR 리뷰 워크플로우를 서브 에이전트들로 구성하기",
    status: "in_progress",
    activeForm: "PR 리뷰 워크플로우를 서브 에이전트들로 구성하는 중"
  },
  {
    content: "각 에이전트별 역할 및 작업 정의",
    status: "pending", 
    activeForm: "각 에이전트별 역할 및 작업 정의하는 중"
  },
  {
    content: "에이전트 간 데이터 전달 방식 설계",
    status: "pending",
    activeForm: "에이전트 간 데이터 전달 방식 설계하는 중"
  },
  {
    content: "통합 리뷰 결과 생성 및 코멘트 달기",
    status: "pending",
    activeForm: "통합 리뷰 결과 생성 및 코멘트 달고 있는 중"
  }
])

// 3개 에이전트 병렬 실행
Task({ /* Agent 1 */ }) +
Task({ /* Agent 2 */ }) + 
Task({ /* Agent 3 */ })
```

### 3. 결과 통합 및 포스팅
- 각 에이전트의 분석 결과를 수집
- 심각도별로 분류 (Critical/Major/Minor)
- 종합 리뷰 코멘트 생성 및 GitHub에 게시

## 에이전트별 역할

### 🔍 Agent 1: 코드 분석가
- **전문 영역**: 구조, 로직, 버그 탐지
- **주요 검토 항목**: 
  - 코드 아키텍처 및 설계 패턴
  - 알고리즘 정확성
  - 버그 및 에러 처리
  - 가독성 및 유지보수성

### 🛡️ Agent 2: 보안/성능 전문가
- **전문 영역**: 보안, 성능, 최적화
- **주요 검토 항목**:
  - XSS, 입력 검증 등 보안 이슈
  - 성능 병목 및 메모리 누수
  - 브라우저 호환성
  - 최적화 기회

### 🎨 Agent 3: UX/접근성 전문가  
- **전문 영역**: 사용자 경험, 접근성
- **주요 검토 항목**:
  - UI/UX 설계 품질
  - WCAG 접근성 가이드라인 준수
  - 모바일 반응형 디자인
  - 사용자 인터랙션 개선

## 장점

### 🚀 **효율성**
- 병렬 처리로 빠른 분석 속도
- 각 에이전트가 전문 영역에 집중

### 🎯 **완전성**
- 다각도 분석으로 놓치는 이슈 최소화
- 구조화된 체계적인 리뷰

### 🔄 **재사용성**
- 템플릿화된 워크플로우
- 다양한 프로젝트에 적용 가능

### 📈 **일관성**
- 동일한 품질 기준
- 표준화된 리뷰 형식

## 커스터마이징 가이드

### 언어별 맞춤화
```javascript
// Python 프로젝트
prompt: `... 다음 Python 특화 관점에서:
1. PEP 8 스타일 가이드 준수
2. 타입 힌팅 사용
3. Exception 처리 패턴
4. 메모리 효율성`

// React 프로젝트  
prompt: `... 다음 React 특화 관점에서:
1. 컴포넌트 설계 패턴
2. Hooks 사용법
3. 성능 최적화 (memo, callback)
4. 상태 관리 패턴`
```

### 프로젝트 규모별 조정
```javascript
// 대규모 프로젝트: 4개 에이전트
// + Agent 4: 아키텍처 리뷰어

// 소규모 프로젝트: 2개 에이전트  
// Agent 1: 코드품질 + 보안
// Agent 2: UX + 성능
```

### 특수 도메인 대응
```javascript
// 금융/의료: 보안 강화
// 게임: 성능 집중  
// 교육: 접근성 강화
```

## 버전 이력
- v1.0: 기본 3-에이전트 워크플로우
- v1.1: 언어별 커스터마이징 추가 예정
- v1.2: MCP 서버 통합 예정